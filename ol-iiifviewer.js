/*
 * IiifViewer; Copyright (C) 2014 - Klokan Technologies GmbH
 * Powered by OpenLayers 3
 */
var h,p=this;function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function s(){}
function t(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function u(a){var b=t(a);return"array"==b||"object"==b&&"number"==typeof a.length}function v(a){return"string"==typeof a}var w="closure_uid_"+(1E9*Math.random()>>>0),aa=0;function ba(a,b,c){return a.call.apply(a.bind,arguments)}
function ca(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function x(a,b,c){x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ba:ca;return x.apply(null,arguments)}var da=Date.now||function(){return+new Date};
function y(a,b){function c(){}c.prototype=b.prototype;a.aa=b.prototype;a.prototype=new c};function z(a){Error.captureStackTrace?Error.captureStackTrace(this,z):this.stack=Error().stack||"";a&&(this.message=String(a))}y(z,Error);var A=Array.prototype,ea=A.indexOf?function(a,b,c){return A.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(v(a))return v(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},fa=A.forEach?function(a,b,c){A.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=v(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},ga=A.some?function(a,b,c){return A.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=v(a)?a.split(""):
a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function ha(a,b){var c=ea(a,b);0<=c&&A.splice.call(a,c,1)}function ia(a){return A.concat.apply(A,arguments)}function ja(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]};var B,C,D,ka;function la(){return p.navigator?p.navigator.userAgent:null}ka=D=C=B=!1;var E;if(E=la()){var ma=p.navigator;B=0==E.lastIndexOf("Opera",0);C=!B&&(-1!=E.indexOf("MSIE")||-1!=E.indexOf("Trident"));D=!B&&-1!=E.indexOf("WebKit");ka=!B&&!D&&!C&&"Gecko"==ma.product}var na=B,F=C,G=ka,H=D,oa=p.navigator,pa=-1!=(oa&&oa.platform||"").indexOf("Mac");function qa(){var a=p.document;return a?a.documentMode:void 0}var I;
a:{var J="",K;if(na&&p.opera)var ra=p.opera.version,J="function"==typeof ra?ra():ra;else if(G?K=/rv\:([^\);]+)(\)|;)/:F?K=/\b(?:MSIE|rv)\s+([^\);]+)(\)|;)/:H&&(K=/WebKit\/(\S+)/),K)var sa=K.exec(la()),J=sa?sa[1]:"";if(F){var ta=qa();if(ta>parseFloat(J)){I=String(ta);break a}}I=J}var ua={};
function L(a){var b;if(!(b=ua[a])){b=0;for(var c=String(I).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",k=d[f]||"",q=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var l=q.exec(g)||["","",""],m=n.exec(k)||["","",""];if(0==l[0].length&&0==m[0].length)break;b=((0==l[1].length?0:parseInt(l[1],10))<(0==m[1].length?0:parseInt(m[1],10))?-1:(0==l[1].length?0:parseInt(l[1],
10))>(0==m[1].length?0:parseInt(m[1],10))?1:0)||((0==l[2].length)<(0==m[2].length)?-1:(0==l[2].length)>(0==m[2].length)?1:0)||(l[2]<m[2]?-1:l[2]>m[2]?1:0)}while(0==b)}b=ua[a]=0<=b}return b}var va=p.document,wa=va&&F?qa()||("CSS1Compat"==va.compatMode?parseInt(I,10):5):void 0;var xa=!F||F&&9<=wa,ya=F&&!L("9");!H||L("528");G&&L("1.9b")||F&&L("8")||na&&L("9.5")||H&&L("528");G&&!L("8")||F&&L("9");function M(a,b){this.type=a;this.currentTarget=this.target=b}M.prototype.B=!1;M.prototype.defaultPrevented=!1;M.prototype.$=!0;M.prototype.preventDefault=function(){this.defaultPrevented=!0;this.$=!1};function za(a){za[" "](a);return a}za[" "]=s;function N(a,b){a&&Aa(this,a,b)}y(N,M);h=N.prototype;h.target=null;h.relatedTarget=null;h.offsetX=0;h.offsetY=0;h.clientX=0;h.clientY=0;h.screenX=0;h.screenY=0;h.button=0;h.keyCode=0;h.charCode=0;h.ctrlKey=!1;h.altKey=!1;h.shiftKey=!1;h.metaKey=!1;h.Z=!1;h.I=null;
function Aa(a,b,c){var d=a.type=b.type;M.call(a,d);a.target=b.target||b.srcElement;a.currentTarget=c;if(c=b.relatedTarget){if(G){var e;a:{try{za(c.nodeName);e=!0;break a}catch(f){}e=!1}e||(c=null)}}else"mouseover"==d?c=b.fromElement:"mouseout"==d&&(c=b.toElement);a.relatedTarget=c;a.offsetX=H||void 0!==b.offsetX?b.offsetX:b.layerX;a.offsetY=H||void 0!==b.offsetY?b.offsetY:b.layerY;a.clientX=void 0!==b.clientX?b.clientX:b.pageX;a.clientY=void 0!==b.clientY?b.clientY:b.pageY;a.screenX=b.screenX||0;
a.screenY=b.screenY||0;a.button=b.button;a.keyCode=b.keyCode||0;a.charCode=b.charCode||("keypress"==d?b.keyCode:0);a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.shiftKey=b.shiftKey;a.metaKey=b.metaKey;a.Z=pa?b.metaKey:b.ctrlKey;a.state=b.state;a.I=b;b.defaultPrevented&&a.preventDefault();delete a.B}h.preventDefault=function(){N.aa.preventDefault.call(this);var a=this.I;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,ya)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Ba="closure_listenable_"+(1E6*Math.random()|0),Ca=0;function Da(a,b,c,d,e,f){this.i=a;this.L=b;this.src=c;this.type=d;this.capture=!!e;this.w=f;this.key=++Ca;this.o=this.G=!1};function Ea(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Fa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Ga(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Ha(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return c};var Ia={},O={},P={},Q={};function Ja(){var a=Ka,b=xa?function(c){return a.call(b.src,b.i,c)}:function(c){c=a.call(b.src,b.i,c);if(!c)return c};return b}
function La(a,b,c,d,e){if("array"==t(b))for(var f=0;f<b.length;f++)La(a,b[f],c,d,e);else if(c=Ma(c),a&&a[Ba])a.ga(b,c,d,e);else a:{if(!b)throw Error("Invalid event type");d=!!d;var g=O;b in g||(g[b]={a:0});g=g[b];d in g||(g[d]={a:0},g.a++);var g=g[d],f=a[w]||(a[w]=++aa),k;if(g[f]){k=g[f];for(var q=0;q<k.length;q++)if(g=k[q],g.i==c&&g.w==e){if(g.o)break;break a}}else k=g[f]=[],g.a++;q=Ja();g=new Da(c,q,a,b,d,e);g.G=!0;q.src=a;q.i=g;k.push(g);P[f]||(P[f]=[]);P[f].push(g);a.addEventListener?a.addEventListener(b,
q,d):a.attachEvent(b in Q?Q[b]:Q[b]="on"+b,q);Ia[g.key]=g}}function Na(a,b,c){var d=1;b=b[w]||(b[w]=++aa);if(a[b])for(a=ja(a[b]),b=0;b<a.length;b++){var e=a[b];e&&!e.o&&(d&=!1!==Oa(e,c))}return Boolean(d)}
function Oa(a,b){var c=a.i,d=a.w||a.src;if(a.G&&"number"!=typeof a&&a&&!a.o){var e=a.src;if(e&&e[Ba])e.ja(a);else{var f=a.type,g=a.L,k=a.capture;e.removeEventListener?e.removeEventListener(f,g,k):e.detachEvent&&e.detachEvent(f in Q?Q[f]:Q[f]="on"+f,g);e=e[w]||(e[w]=++aa);P[e]&&(g=P[e],ha(g,a),0==g.length&&delete P[e]);a.o=!0;a.i=null;a.L=null;a.src=null;a.w=null;if(g=O[f][k][e])ha(g,a),0==g.length&&(delete O[f][k][e],O[f][k].a--),0==O[f][k].a&&(delete O[f][k],O[f].a--),0==O[f].a&&delete O[f];delete Ia[a.key]}}return c.call(d,
b)}
function Ka(a,b){if(a.o)return!0;var c=a.type,d=O;if(!(c in d))return!0;var d=d[c],e,f;if(!xa){if(!(c=b))a:{for(var c=["window","event"],g=p;e=c.shift();)if(null!=g[e])g=g[e];else{c=null;break a}c=g}e=c;c=!0 in d;g=!1 in d;if(c){if(0>e.keyCode||void 0!=e.returnValue)return!0;a:{var k=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(q){k=!0}if(k||void 0==e.returnValue)e.returnValue=!0}}k=new N;Aa(k,e,this);e=!0;try{if(c){for(var n=[],l=k.currentTarget;l;l=l.parentNode)n.push(l);f=d[!0];for(var m=n.length-
1;!k.B&&0<=m;m--)k.currentTarget=n[m],e&=Na(f,n[m],k);if(g)for(f=d[!1],m=0;!k.B&&m<n.length;m++)k.currentTarget=n[m],e&=Na(f,n[m],k)}else e=Oa(a,k)}finally{n&&(n.length=0)}return e}d=new N(b,this);return e=Oa(a,d)}var Pa="__closure_events_fn_"+(1E9*Math.random()>>>0);function Ma(a){return"function"==t(a)?a:a[Pa]||(a[Pa]=function(b){return a.handleEvent(b)})};function Qa(a){ol.tilegrid.TileGrid.call(this,a)}y(Qa,ol.tilegrid.XYZ);function Ra(a){for(var b=a.Q,c=a.ea||"jpg",d=a.ia||"native",e=a.width,f=a.height,g=a.tileSize||256,k=Math.max(Math.ceil(Math.log(e/g)/Math.LN2),Math.ceil(Math.log(f/g)/Math.LN2)),q=[],n=0;n<=k;n++){var l=Math.pow(2,k-n),m=Math.ceil(e/l),l=Math.ceil(f/l),m=Math.ceil(m/g),l=Math.ceil(l/g);q.push([m,l])}ol.source.TileImage.call(this,{tileGrid:new Qa({resolutions:a.resolutions.reverse(),origin:[0,0],tileSize:g}),tileUrlFunction:function(a){var m=a[0];if(!(k<m)){var l=q[m];if(l){var n=a[1];a=-a[2]-1;if(!(0>
n||l[0]<=n||0>a||l[1]<=a)){m=Math.pow(2,k-m);l=g*m;n*=l;a*=l;var lb=Math.min(n+l,e),l=Math.min(a+l,f);return b+("/"+n+","+a+","+(lb-n)+","+(l-a)+"/pct:"+100/m+"/0/"+d+"."+c)}}}},crossOrigin:a.crossOrigin});ol.has.CANVAS&&this.setTileLoadFunction(function(a,b){var c=a.getImage();La(c,"load",function(){if(0<c.naturalWidth&&(c.naturalWidth!=g||c.naturalHeight!=g)){var b=document.createElement(Sa);b.width=g;b.height=g;b.getContext("2d").drawImage(c,0,0);var d=Ha(a,function(a){return a==c});d&&(a[d]=b)}},
!0);c.src=b})}y(Ra,ol.source.TileImage);!G&&!F||F&&F&&9<=wa||G&&L("1.9.1");F&&L("9");var Sa="CANVAS";function Ta(a,b){Ea(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Ua?a.setAttribute(Ua[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Ua={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Va(a){if("function"==typeof a.g)return a.g();if(v(a))return a.split("");if(u(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Fa(a)}function Wa(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(u(a)||v(a))fa(a,b,c);else{var d;if("function"==typeof a.getKeys)d=a.getKeys();else if("function"!=typeof a.g)if(u(a)||v(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=Ga(a);else d=void 0;for(var e=Va(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)}};function R(a,b){this.d={};this.c=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof R?(c=a.getKeys(),d=a.g()):(c=Ga(a),d=Fa(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}h=R.prototype;h.a=0;h.P=0;h.g=function(){Xa(this);for(var a=[],b=0;b<this.c.length;b++)a.push(this.d[this.c[b]]);return a};h.getKeys=function(){Xa(this);return this.c.concat()};h.k=function(a){return S(this.d,a)};
h.remove=function(a){return S(this.d,a)?(delete this.d[a],this.a--,this.P++,this.c.length>2*this.a&&Xa(this),!0):!1};function Xa(a){if(a.a!=a.c.length){for(var b=0,c=0;b<a.c.length;){var d=a.c[b];S(a.d,d)&&(a.c[c++]=d);b++}a.c.length=c}if(a.a!=a.c.length){for(var e={},c=b=0;b<a.c.length;)d=a.c[b],S(e,d)||(a.c[c++]=d,e[d]=1),b++;a.c.length=c}}h.get=function(a,b){return S(this.d,a)?this.d[a]:b};h.set=function(a,b){S(this.d,a)||(this.a++,this.c.push(a),this.P++);this.d[a]=b};h.clone=function(){return new R(this)};
function S(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var Ya=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?\x3d[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Za(a){if($a){$a=!1;var b=p.location;if(b){var c=b.href;if(c&&(c=(c=Za(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw $a=!0,Error();}}return a.match(Ya)}var $a=H;function T(a,b){var c;if(a instanceof T)this.f=void 0!==b?b:a.f,ab(this,a.j),c=a.u,U(this),this.u=c,c=a.l,U(this),this.l=c,bb(this,a.s),c=a.r,U(this),this.r=c,cb(this,a.h.clone()),c=a.q,U(this),this.q=c;else if(a&&(c=Za(String(a)))){this.f=!!b;ab(this,c[1]||"",!0);var d=c[2]||"";U(this);this.u=d?decodeURIComponent(d):"";d=c[3]||"";U(this);this.l=d?decodeURIComponent(d):"";bb(this,c[4]);d=c[5]||"";U(this);this.r=d?decodeURIComponent(d):"";cb(this,c[6]||"",!0);c=c[7]||"";U(this);this.q=c?decodeURIComponent(c):
""}else this.f=!!b,this.h=new V(null,0,this.f)}h=T.prototype;h.j="";h.u="";h.l="";h.s=null;h.r="";h.q="";h.X=!1;h.f=!1;h.toString=function(){var a=[],b=this.j;b&&a.push(W(b,db),":");if(b=this.l){a.push("//");var c=this.u;c&&a.push(W(c,db),"@");a.push(encodeURIComponent(String(b)));b=this.s;null!=b&&a.push(":",String(b))}if(b=this.r)this.l&&"/"!=b.charAt(0)&&a.push("/"),a.push(W(b,"/"==b.charAt(0)?eb:fb));(b=this.h.toString())&&a.push("?",b);(b=this.q)&&a.push("#",W(b,gb));return a.join("")};
h.clone=function(){return new T(this)};function ab(a,b,c){U(a);a.j=c?b?decodeURIComponent(b):"":b;a.j&&(a.j=a.j.replace(/:$/,""))}function bb(a,b){U(a);if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.s=b}else a.s=null}function cb(a,b,c){U(a);b instanceof V?(a.h=b,a.h.D(a.f)):(c||(b=W(b,hb)),a.h=new V(b,0,a.f))}function ib(a,b,c){U(a);"array"==t(c)||(c=[String(c)]);jb(a.h,b,c)}function U(a){if(a.X)throw Error("Tried to modify a read-only Uri");}
h.D=function(a){this.f=a;this.h&&this.h.D(a);return this};function W(a,b){return v(a)?encodeURI(a).replace(b,kb):null}function kb(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var db=/[#\/\?@]/g,fb=/[\#\?:]/g,eb=/[\#\?]/g,hb=/[\#\?@]/g,gb=/#/g;function V(a,b,c){this.e=a||null;this.f=!!c}
function X(a){if(!a.b&&(a.b=new R,a.a=0,a.e))for(var b=a.e.split("\x26"),c=0;c<b.length;c++){var d=b[c].indexOf("\x3d"),e=null,f=null;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=Y(a,e);a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}h=V.prototype;h.b=null;h.a=null;h.add=function(a,b){X(this);this.e=null;a=Y(this,a);var c=this.b.get(a);c||this.b.set(a,c=[]);c.push(b);this.a++;return this};
h.remove=function(a){X(this);a=Y(this,a);return this.b.k(a)?(this.e=null,this.a-=this.b.get(a).length,this.b.remove(a)):!1};h.k=function(a){X(this);a=Y(this,a);return this.b.k(a)};h.getKeys=function(){X(this);for(var a=this.b.g(),b=this.b.getKeys(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};h.g=function(a){X(this);var b=[];if(a)this.k(a)&&(b=ia(b,this.b.get(Y(this,a))));else{a=this.b.g();for(var c=0;c<a.length;c++)b=ia(b,a[c])}return b};
h.set=function(a,b){X(this);this.e=null;a=Y(this,a);this.k(a)&&(this.a-=this.b.get(a).length);this.b.set(a,[b]);this.a++;return this};h.get=function(a,b){var c=a?this.g(a):[];return 0<c.length?String(c[0]):b};function jb(a,b,c){a.remove(b);0<c.length&&(a.e=null,a.b.set(Y(a,b),ja(c)),a.a+=c.length)}
h.toString=function(){if(this.e)return this.e;if(!this.b)return"";for(var a=[],b=this.b.getKeys(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.g(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="\x3d"+encodeURIComponent(String(d[f])));a.push(g)}return this.e=a.join("\x26")};h.clone=function(){var a=new V;a.e=this.e;this.b&&(a.b=this.b.clone(),a.a=this.a);return a};function Y(a,b){var c=String(b);a.f&&(c=c.toLowerCase());return c}
h.D=function(a){a&&!this.f&&(X(this),this.e=null,Wa(this.b,function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),jb(this,d,a))},this));this.f=a};function mb(a){return function(){throw a;}};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function nb(a,b){this.p=[];this.ha=a;this.V=b||null}h=nb.prototype;h.m=!1;h.n=!1;h.v=!1;h.R=!1;h.N=!1;h.S=0;h.H=function(a,b){this.v=!1;Z(this,a,b)};function Z(a,b,c){a.m=!0;a.C=c;a.n=!b;ob(a)}function pb(a){if(a.m){if(!a.N)throw new qb(a);a.N=!1}}function rb(a){return ga(a.p,function(a){return"function"==t(a[1])})}
function ob(a){a.F&&(a.m&&rb(a))&&(p.clearTimeout(a.F),delete a.F);a.K&&(a.K.S--,delete a.K);for(var b=a.C,c=!1,d=!1;a.p.length&&!a.v;){var e=a.p.shift(),f=e[0],g=e[1],e=e[2];if(f=a.n?g:f)try{var k=f.call(e||a.V,b);void 0!==k&&(a.n=a.n&&(k==b||k instanceof Error),a.C=b=k);b instanceof nb&&(d=!0,a.v=!0)}catch(q){b=q,a.n=!0,rb(a)||(c=!0)}}a.C=b;d&&(d=b,k=x(a.H,a,!0),f=x(a.H,a,!1),d.p.push([k,f,void 0]),d.m&&ob(d),b.R=!0);c&&(a.F=p.setTimeout(mb(b),0))}function qb(a){z.call(this);this.ca=a}y(qb,z);
qb.prototype.message="Deferred has already fired";function sb(a,b){var c=b||{},d=c.document||document,e=document.createElement("SCRIPT"),f={M:e,t:void 0},g=new nb(tb,f),k=null,q=null!=c.timeout?c.timeout:5E3;0<q&&(k=window.setTimeout(function(){$(e,!0);var b=new ub(vb,"Timeout reached for loading script "+a);pb(g);Z(g,!1,b)},q),f.t=k);e.onload=e.onreadystatechange=function(){e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||($(e,c.U||!1,k),pb(g),Z(g,!0,null))};e.onerror=function(){$(e,!0,k);var b=new ub(wb,"Error while loading script "+
a);pb(g);Z(g,!1,b)};Ta(e,{type:"text/javascript",charset:"UTF-8",src:a});xb(d).appendChild(e);return g}function xb(a){var b=a.getElementsByTagName("HEAD");return b&&0!=b.length?b[0]:a.documentElement}function tb(){if(this&&this.M){var a=this.M;a&&"SCRIPT"==a.tagName&&$(a,!0,this.t)}}function $(a,b,c){null!=c&&p.clearTimeout(c);a.onload=s;a.onerror=s;a.onreadystatechange=s;b&&window.setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a)},0)}var wb=0,vb=1;
function ub(a,b){var c="Jsloader error (code #"+a+")";b&&(c+=": "+b);z.call(this,c);this.code=a}y(ub,z);function yb(a,b){this.ba=new T(a);this.T=b?b:"callback";this.t=5E3}var zb=0;yb.prototype.send=function(a,b,c,d){a=a||null;d=d||"_"+(zb++).toString(36)+da().toString(36);p._callbacks_||(p._callbacks_={});var e=this.ba.clone();if(a)for(var f in a)a.hasOwnProperty&&!a.hasOwnProperty(f)||ib(e,f,a[f]);b&&(p._callbacks_[d]=Ab(d,b),ib(e,this.T,"_callbacks_."+d));b=sb(e.toString(),{timeout:this.t,U:!0});b.p.push([null,Bb(d,a,c),void 0]);b.m&&ob(b);return{fa:d,da:b}};
function Bb(a,b,c){return function(){Cb(a,!1);c&&c(b)}}function Ab(a,b){return function(c){Cb(a,!0);b.apply(void 0,arguments)}}function Cb(a,b){p._callbacks_[a]&&(b?delete p._callbacks_[a]:p._callbacks_[a]=s)};function Db(a,b,c,d,e){a=v(a)?document.getElementById(a):a;if(!a)throw Error("Invalid element");this.Y=a;this.d=null;this.O=!0==d;this.A=e||null;this.J=c||null;this.W=v(b)?b.substring(0,b.lastIndexOf("/")):null;Eb(this,b)}Db.prototype.getMap=function(){return this.d};
function Fb(a,b){var c=b.width,d=b.height,e=b["@id"];if(!e){var f=b.image_host,g=b.identifier;f&&g&&(e=f+g)}e||(e=a.W);if(!e)throw Error("Unable to determine base url");f=new ol.proj.Projection({code:"IIIF",units:"pixels",extent:[0,-d,c,0]});e=new Ra({Q:e,width:c,height:d,resolutions:b.scale_factors,projection:f,crossOrigin:a.O?"":void 0});e=new ol.layer.Tile({source:e});a.d=new ol.Map({layers:[e],target:a.Y,renderer:a.O?"webgl":void 0,view:new ol.View({projection:f,extent:[0,-d,c,0]}),interactions:ol.interaction.defaults({mouseWheelZoom:null==
a.A}),controls:[],logo:!1});a.A&&a.d.addInteraction(a.A);a.d.getView().fitExtent(f.getExtent(),a.d.getSize()||null);a.J&&a.J(a)}function Eb(a,b){v(b)?(new yb(b)).send(null,x(function(a){Eb(this,a)},a)):Fb(a,b)};r("IiifViewer",Db);r("IiifViewer.prototype.getMap",Db.prototype.getMap);r("IiifSource",Ra);
